<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Roboto:wght@400;700&display=swap" rel="stylesheet" />
  <title>Sombria</title>
  <style>
    /* Fundo animado */
    body {
      margin: 0;
      min-height: 100vh;
      color: white;
      background: linear-gradient(270deg, #F48FB1, #CE93D8, #7E57C2, #42A5F5);
      background-size: 800% 800%;
      animation: bgColorShift 5s ease infinite;
      font-family: 'Roboto', sans-serif;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    @keyframes bgColorShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* HEADER padronizado */
    header{
      display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;
      padding:1.5rem 4vw;background:rgba(0,0,0,.25);box-shadow:0 4px 20px rgba(0,0,0,.4);gap:1rem
    }
    .titulo-site{
      font-family:'Great Vibes',cursive;font-size:2.2rem;margin:0;
      text-shadow:2px 2px 4px rgba(123,31,162,.8),0 0 10px rgba(233,30,99,.8)
    }
    nav a{text-decoration:none;color:#fff;font-size:1.3rem;margin:0 .5rem}

    /* T√≠tulo principal com brilho pulsante */
    .titulo-suspense {
      font-family: 'Great Vibes', cursive;
      font-size: 48px;
      font-weight: normal;
      text-align: center;
      color: #ffffff;
      background-color: rgba(90, 42, 70, 0.3);
      backdrop-filter: blur(4px);
      padding: 12px 24px;
      border-radius: 16px;
      width: fit-content;
      box-shadow: 0 4px 10px rgba(90, 42, 70, 0.2);
      margin: 40px auto 20px;
      user-select: none;
      animation: brilhoPulsante 2.5s infinite ease-in-out;
      cursor: default;
    }
    @keyframes brilhoPulsante {
      0%, 100% {
        transform: scale(1);
        text-shadow: 2px 2px 5px rgba(255,182,193,.8), 0 0 15px rgba(255,105,180,.9);
        color: #fff;
      }
      50% {
        transform: scale(1.05);
        text-shadow: 4px 4px 10px rgba(255,182,193,1), 0 0 25px rgba(255,105,180,1);
        color: #ffe6f0;
      }
    }

    main {
      flex-grow: 1;
      padding: 0 20px 40px;
      margin: 20px auto 0;
      font-size: 18px;
      line-height: 1.6;
      text-align: justify;
      user-select: text;
      filter: drop-shadow(0 0 2px rgba(0,0,0,0.7));
      width: 1300px;
      max-width: 100%;
    }

    /* FOOTER */
    .rodape {
      background-color: #5a2a46;
      color: #e6d6e8;
      font-size: 0.9rem;
      padding: 16px 0;
      border-top: 0.5px solid #7a4f9a;
      width: 100%;
      box-sizing: border-box;
      position: relative;
      user-select: none;
      font-family: 'Poppins', sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      margin: 0;
    }
    .container-rodape { max-width: 1100px; width: 100%; padding: 0 16px; box-sizing: border-box; text-align: center; }
    .container-rodape p { margin: 0; }
    .florzinha { font-size: 1.4rem; line-height: 1; color: #d4a1e8; }

    /* GENEROS */
    .generos { display: flex; justify-content: center; gap: 30px; flex-wrap: wrap; margin-top: 20px; }
    .conteudo-suspense { padding-top: 20px; margin-top: 40px; display: flex; flex-direction: column; align-items: center; gap: 20px; }
    .genero img { width: 100px; height: 100px; border-radius: 70%; object-fit: cover; flex-shrink: 0; transition: transform .2s ease, box-shadow .2s ease; }
    .genero p { margin: 0; font-size: 16px; white-space: normal; overflow-wrap: break-word !important; width: 100%; text-align: center; line-height: 1.2; }
    .genero img:hover { transform: scale(1.1); box-shadow: 0 0 15px 5px #FF6F91; }
    .generos a { text-decoration: none; color: inherit; }

    /* LIVROS */
    .livros-wrapper {
      display: flex; flex-wrap: wrap; justify-content: center; gap: 24px;
      max-width: calc(6 * 210px + 5 * 24px);
      margin: 0 auto 60px auto; padding-bottom: 50px;
    }
    .livro { flex: 0 0 210px; position: relative; padding: 12px; border-radius: 10px; overflow: hidden; transition: box-shadow 0.3s ease; }
    .livro img {
      width: 100%; height: 320px; object-fit: cover; border: 3px solid #FF6F91; border-radius: 6px;
      transition: transform 0.3s ease, filter 0.3s ease;
    }
    .livro:hover img { transform: scale(1.05); filter: brightness(60%); }

    .overlay {
      position: absolute; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(47, 28, 46, 0.85);
      display: flex; flex-direction: column; justify-content: space-between;
      padding: 12px; box-sizing: border-box; opacity: 0; transform: translateY(100%);
      transition: transform 0.4s ease, opacity 0.4s ease; pointer-events: none; border-radius: 10px;
    }
    .livro:hover .overlay { opacity: 1; transform: translateY(0); pointer-events: auto; }
    .livro:hover { box-shadow: 0 0 15px #FF6F91; }

    .titulo-livro {
      font-family: 'Great Vibes', cursive; font-size: 20px; font-weight: normal; color: #FFEBF0; margin-bottom: 4px; text-shadow: 1px 1px 3px #000;
      text-align: center; white-space: normal; word-wrap: break-word; overflow-wrap: break-word;
    }
    .autor-livro { font-size: 13px; font-style: italic; color: #E0C9D0; text-align: center; }
    .valor-livro {
      font-size: 13px; margin-top: 4px; background: #FFC0CB; color: #5A1C2E; padding: 2px 6px; border-radius: 8px;
      opacity: 0.5; filter: blur(0.5px); transition: opacity 0.3s ease, filter 0.3s ease;
      text-align: center; display: block; width: fit-content; margin-left: auto; margin-right: auto;
    }
    .livro:hover .valor-livro { opacity: 0.7; filter: blur(0.3px); }

    .acoes { display: flex; gap: 10px; margin-top: 6px; align-items: center; justify-content: center; }
    .icone { font-size: 18px; cursor: pointer; transition: transform 0.2s ease; user-select: none; }
    .icone:hover { transform: scale(1.3); }

    .acoes .detalhes {
      background: #FF6F91; color: white; padding: 6px 12px; border-radius: 6px; font-size: 14px; font-weight: bold;
      text-decoration: none; border: none; cursor: pointer; transition: background 0.3s ease;
    }
    .acoes .detalhes:hover { background: #B05A6E; }

    /* BOT√ÉO VOLTAR */
    .botao-voltar-container { text-align: center; margin-top: -20px; }
    .botao-voltar {
      font-family: 'Great Vibes', cursive; background: linear-gradient(135deg, #845EC2, #D65DB1);
      color: white; padding: 14px 28px; font-size: 1.5rem; font-weight: 500; border: none; border-radius: 30px;
      text-decoration: none; display: inline-block; box-shadow: 0 6px 12px rgba(132, 94, 194, 0.3);
      transition: transform 0.2s ease, box-shadow 0.3s ease;
    }
    .botao-voltar:hover { transform: scale(1.05); box-shadow: 0 8px 16px rgba(132, 94, 194, 0.4); }

    main { flex: 1; }


    /* T√≠tulo principal do site */
.titulo, .arquivo-titulo {
  font-size: 1.8rem; /* menor que antes */
}

/* T√≠tulo da cole√ß√£o */
.colecao h2 {
  font-size: 2rem; /* antes era 2.5rem */
}

/* T√≠tulos dos livros */
.titulo-livro {
  font-size: 1rem; /* antes 1.2rem */
}

/* Autor dos livros */
.autor-livro {
  font-size: 0.9rem; /* antes 1rem */
}

/* Valor dos livros */
.valor-livro {
  font-size: 0.9rem; /* antes 1rem */
}

  </style>
</head>
<body>

  <!-- HEADER padronizado -->
  <header>
    <h1 class="titulo-site">Arquivo Feminino: Proibido</h1>
    <nav>
      <a href="index.html" title="In√≠cio">üè†</a>
      <a href="favoritos.html" title="Favoritos">ü§ç</a>
      <a href="pedidos.html" title="Pedidos">üõí</a>
      <a href="contato.html" title="Contato">üìû</a>
    </nav>
  </header>

  <h1 class="titulo-suspense">Sombria</h1>

  <!-- G√äNEROS -->
  <div class="generos">
    <a href="romantica.html" class="genero">
      <img src="imagem/cicatriz.jpg" alt="Rom√¢ntica">
      <p>Rom√¢ntica</p>
    </a>
    <a href="mistica.html" class="genero">
      <img src="imagem/mistica.jpg" alt="M√≠stica">
      <p>M√≠stica</p>
    </a>
    <a href="empoderada.html" class="genero">
      <img src="imagem/brava.jpg" alt="Empoderada">
      <p>Empoderada</p>
    </a>
    <a href="criativa.html" class="genero">
      <img src="imagem/criativa.jpg" alt="Criativa">
      <p>Criativa</p>
    </a>
    <a href="visionaria.html" class="genero">
      <img src="imagem/ficcaocientifica.jpg" alt="Vision√°ria">
      <p>Vision√°ria</p>
    </a>
  </div>

  <main>
    <div class="livros-wrapper">
      <!-- (cards de livros iguais ao seu c√≥digo atual) -->
      <!-- O Sorriso Que Ela Deixou -->
      <div class="livro">
        <img src="imagem/livrosorriso1.png" alt="O Sorriso Que Ela Deixou">
        <div class="overlay">
          <p class="titulo-livro">‚ú®O Sorriso Que Ela Deixou‚ú®</p>
          <p class="autor-livro">Pam Alves</p>
          <p class="valor-livro">R$ 46,90</p>
          <div class="acoes">
            <a href="livros.html?id=sorriso-que-ela-deixou" class="detalhes">Detalhes</a>
            <span class="icone" data-fav-btn data-id="sorriso-que-ela-deixou" data-titulo="O Sorriso Que Ela Deixou" data-autor="Pam Alves" data-valor="46.90" data-imagem="imagem/livrosorriso1.png">ü§ç</span>
            <span class="icone" data-cart-btn data-id="sorriso-que-ela-deixou" data-titulo="O Sorriso Que Ela Deixou" data-autor="Pam Alves" data-valor="46.90" data-imagem="imagem/livrosorriso1.png">üõí</span>
          </div>
        </div>
      </div>

      <!-- As Boas Meninas N√£o Matam -->
      <div class="livro">
        <img src="imagem/livrogarotas1.png" alt="As Boas Meninas N√£o Matam">
        <div class="overlay">
          <p class="titulo-livro">‚ú®As Boas Meninas N√£o Matam‚ú®</p>
          <p class="autor-livro">Kimberly Muller</p>
          <p class="valor-livro">R$ 44,90</p>
          <div class="acoes">
            <a href="livros.html?id=boas-meninas-nao-matam" class="detalhes">Detalhes</a>
            <span class="icone" data-fav-btn data-id="boas-meninas-nao-matam" data-titulo="As Boas Meninas N√£o Matam" data-autor="Kimberly Muller" data-valor="44.90" data-imagem="imagem/livrogarotas1.png">ü§ç</span>
            <span class="icone" data-cart-btn data-id="boas-meninas-nao-matam" data-titulo="As Boas Meninas N√£o Matam" data-autor="Kimberly Muller" data-valor="44.90" data-imagem="imagem/livrogarotas1.png">üõí</span>
          </div>
        </div>
      </div>

      <!-- S√≥ Eu Voltei -->
      <div class="livro">
        <img src="imagem/livroeu1.png" alt="Livro S√≥ Eu Voltei">
        <div class="overlay">
          <p class="titulo-livro">ü©∏ S√≥ Eu Voltei ü©∏</p>
          <p class="autor-livro">Victor Lima</p>
          <p class="valor-livro">R$ 49,90</p>
          <div class="acoes">
            <a href="livros.html?id=so-eu-voltei" class="detalhes">Detalhes</a>
            <span class="icone" data-fav-btn data-id="so-eu-voltei" data-titulo="S√≥ Eu Voltei" data-autor="Victor Lima" data-valor="49.90" data-imagem="imagem/livroeu1.png">ü§ç</span>
            <span class="icone" data-cart-btn data-id="so-eu-voltei" data-titulo="S√≥ Eu Voltei" data-autor="Victor Lima" data-valor="49.90" data-imagem="imagem/livroeu1.png">üõí</span>
          </div>
        </div>
      </div>

      <!-- Marca na Pele -->
      <div class="livro">
        <img src="imagem/livromarca1.png" alt="Livro Marca na Pele">
        <div class="overlay">
          <p class="titulo-livro">ü©∏Marca na Peleü©∏</p>
          <p class="autor-livro">Anahi Vidal</p>
          <p class="valor-livro">R$ 58,90</p>
          <div class="acoes">
            <a href="livros.html?id=marca-na-pele" class="detalhes">Detalhes</a>
            <span class="icone" data-fav-btn data-id="marca-na-pele" data-titulo="Marca na Pele" data-autor="Anahi Vidal" data-valor="58.90" data-imagem="imagem/livromarca1.png">ü§ç</span>
            <span class="icone" data-cart-btn data-id="marca-na-pele" data-titulo="Marca na Pele" data-autor="Anahi Vidal" data-valor="58.90" data-imagem="imagem/livromarca1.png">üõí</span>
          </div>
        </div>
      </div>

      <!-- A Porta Sem Nome -->
      <div class="livro">
        <img src="imagem/livroporta1.png" alt="A Porta Sem Nome">
        <div class="overlay">
          <p class="titulo-livro">ü©∏A Porta Sem Nomeü©∏</p>
          <p class="autor-livro">Helena L. Ruiz</p>
          <p class="valor-livro">R$ 45,90</p>
          <div class="acoes">
            <a href="livros.html?id=porta-sem-nome" class="detalhes">Detalhes</a>
            <span class="icone" data-fav-btn data-id="porta-sem-nome" data-titulo="A Porta Sem Nome" data-autor="Helena L. Ruiz" data-valor="45.90" data-imagem="imagem/livroporta1.png">ü§ç</span>
            <span class="icone" data-cart-btn data-id="porta-sem-nome" data-titulo="A Porta Sem Nome" data-autor="Helena L. Ruiz" data-valor="45.90" data-imagem="imagem/livroporta1.png">üõí</span>
          </div>
        </div>
      </div>

      <!-- A Casa das Bonecas Vazias -->
      <div class="livro">
        <img src="imagem/livroboneca1.png" alt="A Casa das Bonecas Vazias">
        <div class="overlay">
          <p class="titulo-livro">üïØÔ∏èA Casa das Bonecas VaziasüïØÔ∏è</p>
          <p class="autor-livro">Isadora Freitas</p>
          <p class="valor-livro">R$ 41,80</p>
          <div class="acoes">
            <a href="livros.html?id=casa-das-bonecas-vazias" class="detalhes">Detalhes</a>
            <span class="icone" data-fav-btn data-id="casa-das-bonecas-vazias" data-titulo="A Casa das Bonecas Vazias" data-autor="Isadora Freitas" data-valor="41.80" data-imagem="imagem/livroboneca1.png">ü§ç</span>
            <span class="icone" data-cart-btn data-id="casa-das-bonecas-vazias" data-titulo="A Casa das Bonecas Vazias" data-autor="Isadora Freitas" data-valor="41.80" data-imagem="imagem/livroboneca1.png">üõí</span>
          </div>
        </div>
      </div>

      <!-- A Lacuna da Meia-Noite -->
      <div class="livro">
        <img src="imagem/livrolacuna1.png" alt="A Lacuna da Meia-Noite">
        <div class="overlay">
          <p class="titulo-livro">üåòA Lacuna da Meia-Noite</p>
          <p class="autor-livro">Diana Luz</p>
          <p class="valor-livro">R$ 41,80</p>
          <div class="acoes">
            <a href="livros.html?id=lacuna-meia-noite" class="detalhes">Detalhes</a>
            <span class="icone" data-fav-btn data-id="lacuna-meia-noite" data-titulo="A Lacuna da Meia-Noite" data-autor="Diana Luz" data-valor="41.80" data-imagem="imagem/livrolacuna1.png">ü§ç</span>
            <span class="icone" data-cart-btn data-id="lacuna-meia-noite" data-titulo="A Lacuna da Meia-Noite" data-autor="Diana Luz" data-valor="41.80" data-imagem="imagem/livrolacuna1.png">üõí</span>
          </div>
        </div>
      </div>

      <!-- Os Vizinhos de Cima Sabem Demais -->
      <div class="livro">
        <img src="imagem/livrovizinhos1.png" alt="Os Vizinhos de Cima Sabem Demais">
        <div class="overlay">
          <p class="titulo-livro">üëÅÔ∏èOs Vizinhos de Cima Sabem Demais</p>
          <p class="autor-livro">Reinaldo T. Garcia</p>
          <p class="valor-livro">R$ 39,50</p>
          <div class="acoes">
            <a href="livros.html?id=vizinhos-sabem-demais" class="detalhes">Detalhes</a>
            <span class="icone" data-fav-btn data-id="vizinhos-sabem-demais" data-titulo="Os Vizinhos de Cima Sabem Demais" data-autor="Reinaldo T. Garcia" data-valor="39.50" data-imagem="imagem/livrovizinhos1.png">ü§ç</span>
            <span class="icone" data-cart-btn data-id="vizinhos-sabem-demais" data-titulo="Os Vizinhos de Cima Sabem Demais" data-autor="Reinaldo T. Garcia" data-valor="39.50" data-imagem="imagem/livrovizinhos1.png">üõí</span>
          </div>
        </div>
      </div>

      <!-- Predadores do Sil√™ncio -->
      <div class="livro">
        <img src="imagem/livropredadores1.png" alt="Predadores do Sil√™ncio">
        <div class="overlay">
          <p class="titulo-livro">üî™Predadores do Sil√™ncio</p>
          <p class="autor-livro">Vera S. Alencar</p>
          <p class="valor-livro">R$ 47,60</p>
          <div class="acoes">
            <a href="livros.html?id=predadores-do-silencio" class="detalhes">Detalhes</a>
            <span class="icone" data-fav-btn data-id="predadores-do-silencio" data-titulo="Predadores do Sil√™ncio" data-autor="Vera S. Alencar" data-valor="47.60" data-imagem="imagem/livropredadores1.png">ü§ç</span>
            <span class="icone" data-cart-btn data-id="predadores-do-silencio" data-titulo="Predadores do Sil√™ncio" data-autor="Vera S. Alencar" data-valor="47.60" data-imagem="imagem/livropredadores1.png">üõí</span>
          </div>
        </div>
      </div>

      <!-- Interna -->
      <div class="livro">
        <img src="imagem/livrointerna1.png" alt="Interna">
        <div class="overlay">
          <p class="titulo-livro">üîëInterna</p>
          <p class="autor-livro">Amanda Martins</p>
          <p class="valor-livro">R$ 43,90</p>
          <div class="acoes">
            <a href="livros.html?id=interna" class="detalhes">Detalhes</a>
            <span class="icone" data-fav-btn data-id="interna" data-titulo="Interna" data-autor="Amanda Martins" data-valor="43.90" data-imagem="imagem/livrointerna1.png">ü§ç</span>
            <span class="icone" data-cart-btn data-id="interna" data-titulo="Interna" data-autor="Amanda Martins" data-valor="43.90" data-imagem="imagem/livrointerna1.png">üõí</span>
          </div>
        </div>
      </div>
    </div>

    <div class="botao-voltar-container">
      <a href="index.html" class="botao-voltar">P√°gina Inicial</a>
    </div>
  </main>

  <footer class="rodape">
    <div class="container-rodape">
    <p><span class="florzinha">‚úø</span> Criado e mantido por Pamela Marini <span class="florzinha">‚úø</span></p>
    </div>
  </footer>

<script>
/* ===== Utils de LS ===== */
function parseLS(k){try{const r=localStorage.getItem(k);return r?JSON.parse(r):null}catch{return null}}
function getLSArrayFlexible(k){const d=parseLS(k);if(Array.isArray(d))return d;if(d&&typeof d==='object')return Object.values(d);return[]}
function saveLS(k,v){localStorage.setItem(k,JSON.stringify(v||[]))}
function normalizeItem(it){if(!it||it.id==null)return null;return{ id:String(it.id), titulo:it.titulo||'', autor:it.autor||'', valor:Number(String(it.valor??'').toString().replace(',','.'))||0, imagem:it.imagem||'' }}
function readFavsSafe(){return getLSArrayFlexible('favoritos').map(normalizeItem).filter(Boolean)}
function writeFavsSafe(a){saveLS('favoritos',(a||[]).map(normalizeItem).filter(Boolean))}
function readCartSafe(){return getLSArrayFlexible('pedidos').map(normalizeItem).filter(Boolean)}
function writeCartSafe(a){saveLS('pedidos',(a||[]).map(normalizeItem).filter(Boolean))}
(function migrate(){writeFavsSafe(readFavsSafe());writeCartSafe(readCartSafe())})();
function hasById(list,id){const sid=String(id);return Array.isArray(list)&&list.some(x=>String(x.id)===sid)}

/* ===== Toast minimal ===== */
(function(){
  const rootId='toast-root', borders={success:'#22c55e',warning:'#f59e0b',error:'#ef4444',info:'#3b82f6'};
  let q=[],show=false,keyNow='';
  function root(){let r=document.getElementById(rootId);if(!r){r=document.createElement('div');r.id=rootId;r.setAttribute('aria-live','polite');r.setAttribute('aria-atomic','true');
    Object.assign(r.style,{position:'fixed',zIndex:'9999',top:'16px',right:'16px',display:'flex',flexDirection:'column',gap:'10px',pointerEvents:'none'});document.body.appendChild(r)}return r}
  function render({text,type='info',duration=2400}){const r=root(),w=document.createElement('div');
    Object.assign(w.style,{pointerEvents:'auto',minWidth:'260px',maxWidth:'min(90vw,380px)',padding:'12px 14px',borderRadius:'12px',color:'#111',background:'#fff',boxShadow:'0 10px 30px rgba(0,0,0,.15)',display:'grid',gridTemplateColumns:'24px 1fr 24px',alignItems:'start',gap:'10px',opacity:'0',transform:'translateY(-10px)',transition:'opacity .18s, transform .18s',borderLeft:`6px solid ${borders[type]||borders.info}`});
    w.innerHTML=`<div style="font-size:18px;line-height:1">${{success:'‚úÖ',warning:'‚ö†Ô∏è',error:'‚ùå',info:'‚ÑπÔ∏è'}[type]||'‚ÑπÔ∏è'}</div>
                 <div style="font:500 14px/1.35 system-ui;color:#111">${text||'Feito!'}</div>
                 <button type="button" aria-label="Fechar" style="border:0;background:transparent;font-size:18px;cursor:pointer;color:#333">√ó</button>`;
    let t=null;const hide=()=>{clearTimeout(t);w.style.opacity='0';w.style.transform='translateY(-10px)';setTimeout(()=>{w.remove();show=false;play()},180)};
    const schedule=()=>{clearTimeout(t);t=setTimeout(hide,duration)}; w.querySelector('button').onclick=hide;
    w.onmouseenter=()=>clearTimeout(t); w.onmouseleave=schedule; r.appendChild(w); requestAnimationFrame(()=>{w.style.opacity='1';w.style.transform='translateY(0)'}); schedule()
  }
  function play(){ if(show) return; const item=q.shift(); if(!item) return; show=true; keyNow=item.k; render(item) }
  window.showToast=(text,opt={})=>{const type=opt.type||'info',k=(type+'::'+(text||'')).slice(0,200); if(k===keyNow||q.some(i=>i.k===k))return; q.push({text,type,k, duration:opt.duration||2400}); play()}
})();

/* ===== Auto-wire dos cards ===== */
function slugFromTitle(t){return String(t||'').toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g,'').replace(/[^a-z0-9]+/g,'-').replace(/(^-|-$)/g,'')}

function initSombria(){
  const favs=readFavsSafe(), cart=readCartSafe();

  document.querySelectorAll('.livro').forEach(card=>{
    const img=card.querySelector('img');
    const overlay=card.querySelector('.overlay');
    const a=overlay?.querySelector('a.detalhes');
    const titulo=(overlay?.querySelector('.titulo-livro')?.textContent||'').trim();
    const autor=(overlay?.querySelector('.autor-livro')?.textContent||'').trim();
    const precoTxt=(overlay?.querySelector('.valor-livro')?.textContent||'').replace(/[^\d,\.]/g,'').replace(',', '.');
    const imagem=img?.getAttribute('src')||'';
    let id='';

    if(a && a.getAttribute('href') && a.getAttribute('href').includes('?')){
      try{ const u=new URL(a.getAttribute('href'), window.location.href); id=u.searchParams.get('id')||''; }catch{}
    }
    if(!id) id=slugFromTitle(titulo)||slugFromTitle(imagem)||Math.random().toString(36).slice(2,9);

    const icons=overlay?.querySelectorAll('.acoes .icone');
    const favBtn=icons?.[0]; const cartBtn=icons?.[1];

    const isFav = favs.some(x=>String(x.id)===String(id));
    if(favBtn){
      favBtn.textContent = isFav ? '‚ù§Ô∏è' : 'ü§ç';
      favBtn.dataset.id=id; favBtn.dataset.titulo=titulo; favBtn.dataset.autor=autor; favBtn.dataset.valor=precoTxt; favBtn.dataset.imagem=imagem;
      favBtn.addEventListener('click', (e)=>{
        e.preventDefault();
        let list=readFavsSafe();
        const item=normalizeItem({id,titulo,autor,valor:precoTxt,imagem});
        if(list.some(x=>String(x.id)===String(id))){
          list=list.filter(x=>String(x.id)!==String(id)); writeFavsSafe(list);
          favBtn.textContent='ü§ç'; showToast('Removido dos favoritos.',{type:'warning'});
        }else{
          list.push(item); writeFavsSafe(list);
          favBtn.textContent='‚ù§Ô∏è'; showToast('Adicionado aos favoritos!',{type:'success'});
        }
      });
    }

    if(cartBtn){
      cartBtn.dataset.id=id; cartBtn.dataset.titulo=titulo; cartBtn.dataset.autor=autor; cartBtn.dataset.valor=precoTxt; cartBtn.dataset.imagem=imagem;
      cartBtn.addEventListener('click',(e)=>{
        e.preventDefault();
        let c=readCartSafe();
        if(c.some(x=>String(x.id)===String(id))){
          showToast('‚ö†Ô∏è Este livro j√° est√° nos pedidos.',{type:'warning'});
        }else{
          c.push(normalizeItem({id,titulo,autor,valor:precoTxt,imagem})); writeCartSafe(c);
          showToast('üìö Livro adicionado aos pedidos!',{type:'success'});
        }
      });
    }
  });
}

document.addEventListener('DOMContentLoaded', initSombria);
</script>

</body>
</html>
